# 正则表达式

**正则表达式**(regular expression)描述了一种字符串匹配的模式（pattern），可以用来：

+ 检查一个字符串是否含有某种子字符串
+ 将匹配的子字符串替换

例：`^[0-9]+abc$`

+ `^` 表示匹配输入字符串的开始位置
+ `[0-9]+` 匹配多个数字，`[0-9]` 匹配单个数字， `+` 匹配一个或者多个
+ `abc$`  匹配字母abc并以abc结尾， `$` 为匹配输入字符串的结束位置

又例：

+ `color+b` 可以匹配 `colorb`、`colorrrb`、`colorrrrrb` 等，`+` 代表前面的字符至少出现一次

+ `color*b` 可以匹配 `colob`、`colorb`、`colorrrb` 等，`*` 代表字符出现零次、一次或者多次

+ `colou?r` 可以匹配 `color` 或者 `colour` ，`?` 代表前面的字符出现零次或一次

正则表达式是由普通字符（例如数字、字母或下划线）以及特殊字符（称为"元字符"）组成的文字模式。描述在搜索文本时要匹配的一个或多个字符串。正则表达式作为一个模板，将某个字符模式与所搜索的字符串进行匹配。

## 普通字符

普通字符包括没有显式指定为元字符的所有可打印和不可打印字符。这包括所有大写和小写字母、所有数字、所有标点符号和一些其他符号

|字符|描述|
|-|-|
| `\d` |匹配一个数字字符。等价于 `[0-9]` |
| `\D` |匹配一个非数字字符。等价于 `[^0-9]` |
| `\w` |匹配字母、数字、下划线。等价于 `[A-Za-z0-9_]` |
| `\W` |匹配非字母、数字、下划线。等价于 `[^A-Za-z0-9_]` |

## 非打印字符

非打印字符也可以是正则表达式的组成部分。下表列出了表示非打印字符的转义序列：

|字符|描述|
|-|-|
| `\cx` | 匹配由x指明的控制字符。例如， `\cM` 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符 |
| `\f` |  匹配一个换页符。等价于 `\x0c` 和 `\cL` |
| `\n` |  匹配一个换行符。等价于 `\x0a` 和 `\cJ` |
| `\r` |  匹配一个回车符。等价于 `\x0d` 和 `\cM` |
| `\t` |  匹配一个制表符。等价于 `\x09` 和 `\cI` |
| `\v` |  匹配一个垂直制表符。等价于 `\x0b` 和 `\cK` |
| `\s` |  匹配任何空白字符，包括空格、制表符、换页符等等。等价于 `[ \f\n\r\t\v]` |
| `\S` |  匹配任何非空白字符。等价于 `[^ \f\n\r\t\v]` |

## 特殊字符

所谓特殊字符，就是一些有特殊含义的字符，要求在试图匹配它们时特别对待。

|字符|描述|
|-|-|
| `$` | 匹配输入字符串的结尾位置。如果设置了RegExp对象的Multiline属性，则 `$` 也匹配 '\n' 或 '\r'|
| `()` | 标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用|
| `*` | 匹配前面的子表达式零次或多次|
| `+` | 匹配前面的子表达式一次或多次|
| `.` | 匹配除换行符 `\n` 之外的任何单字符|
| `[` | 标记一个中括号表达式的开始|
| `?` | 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符|
| `\` | 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如，`\n` 匹配换行符。 `\\` 匹配 `\` ，而 `\(` 则匹配 `(` |
| `^` | 匹配输入字符串的开始位置，在方括号表达式中使用时表示不接受该字符集合|
| `{` | 标记限定符表达式的开始|
| `|` | 指明两项之间的一个选择|

## 限定符

限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。

|限定符|描述|
|-|-|
| `*` | 匹配零次或多次。等价于{0，}|
| `+` | 匹配一次或多次。等价于 {1，}|
| `?` | 匹配零次或一次。等价于 {0，1}|
| `{n}` | 匹配确定的 n 次|
| `{n，}` | 至少匹配n 次|
| `{n，m}` | 最少匹配 n 次且最多匹配 m 次|

## 定位符

定位符使您能够将正则表达式固定到行首或行尾。它们还使您能够创建这样的正则表达式，这些正则表达式出现在一个单词内、在一个单词的开头或者一个单词的结尾。

定位符用来描述字符串或单词的边界，`^` 和 `$` 分别指字符串的开始与结束，`\b` 描述单词的前或后边界，`\B` 表示非单词边界。

正则表达式的定位符有：

|定位符|描述|
|-|-|
| `^` | 匹配输入字符串开始的位置|
| `$` | 匹配输入字符串结尾的位置|
| `\b` | 匹配一个字边界，即字与空格间的位置|
| `\B` | 非字边界匹配|

## 断言

|表达式|描述|
|-|-|
| `(exp)` |匹配 exp 并获取这一匹配|
| `(?:exp)` |匹配 exp 但不获取匹配结果|
| `(?=exp)` |零宽度正预测先行断言，匹配exp前面的位置|
| `(?<=exp)` |零宽度正回顾后发断言，匹配exp后面的位置|
| `(?!exp)` |零宽度负预测先行断言，匹配后面跟的不是exp的位置|
| `(?<!exp)` |零宽度负回顾后发断言，匹配前面不是exp的位置|

## 其它元字符

|元字符|描述|
|-|-|
| `\xn` |匹配 n，其中 n 为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，'\x41' 匹配 "A"。'\x041' 则等价于 '\x04' & "1"。正则表达式中可以使用 ASCII 编码。|
| `\num` |匹配 num，其中 num 是一个正整数。对所获取的匹配的引用。例如，'(.)\1' 匹配两个连续的相同字符。|
| `\n` |标识一个八进制转义值或一个向后引用。如果 \n 之前至少 n 个获取的子表达式，则 n 为向后引用。否则，如果 n 为八进制数字 (0-7)，则 n 为一个八进制转义值。|
| `\nm` |标识一个八进制转义值或一个向后引用。如果 \nm 之前至少有 nm 个获得子表达式，则 nm 为向后引用。如果 \nm 之前至少有 n 个获取，则 n 为一个后跟文字 m 的向后引用。如果前面的条件都不满足，若 n 和 m 均为八进制数字 (0-7)，则 \nm 将匹配八进制转义值 nm。|
| `\nml` |如果 n 为八进制数字 (0-3)，且 m 和 l 均为八进制数字 (0-7)，则匹配八进制转义值 nml。|
| `\un` |匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。例如， \u00A9 匹配版权符号 (?)。|